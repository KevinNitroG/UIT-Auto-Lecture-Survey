// ==UserScript==
// @name            UIT - Auto Lecture Survey
// @author          Kevin Nitro
// @namespace       UIT-KevinNitro
// @description     Tự động đánh giá khảo sát giảng viên UIT. vui lòng disable script khi không sử dụng, tránh conflict với các khảo sát / link khác của trường
// @license         https://github.com/KevinNitroG/UIT-Auto-Lecturer-Survey/raw/main/LICENSE
// @version         1.0
// @icon            https://github.com/KevinNitroG/UIT-Auto-Lecturer-Survey/raw/main/UIT-logo.jpg
// @match           http*://survey.uit.edu.vn/index.php/survey/index/sid/*/token/*
// @match           http*://survey.uit.edu.vn/index.php/survey/index
// @run-at          context-menu
// @downloadURL     https://github.com/KevinNitroG/UIT-Auto-Lecturer-Survey/raw/main/UITAutoLecturerSurvey.user.js
// @updateURL       https://github.com/KevinNitroG/UIT-Auto-Lecturer-Survey/raw/main/UITAutoLecturerSurvey.user.js
// @supportURL      mailto:kevinnitro@duck.com
// ==/UserScript==

// THIS SCRIPT WAS GENERATED BY CHATGPT

(function () {
    "use strict";

    // Check for label tag with class="answertext" then match with the SelectionsArray array randomly
    let answerLabels = document.querySelectorAll("label.answertext");
    let SelectionsArray = [">80%", "50-80%", "Từ 70 đến dưới 90%", "Trên 90%"];
    answerLabels.forEach(function (label) {
        if (SelectionsArray.includes(label.innerText.trim())) {
            label.click();
            // Random sort the array
            SelectionsArray.sort(function () {
                return Math.random() - 0.5;
            });
        }
    });

    // Trigger onclick on all td tags with class "answer_cell_00MH04 answer-item radio-item"
    // Chọn full các ô thứ 4 trong table đánh giá
    let answerCells = document.querySelectorAll(
        "td.answer_cell_00MH04.answer-item.radio-item"
    );
    answerCells.forEach(function (cell) {
        cell.click();
    });

    // Sleep tí
    setTimeout(function () {}, 100);

    // Check for the button with type="submit" and id="movenextbtn"
    // Ấn tiếp tục
    let moveNextBtn = document.querySelector(
        'button[type="submit"][id="movenextbtn"]'
    );
    if (moveNextBtn) {
        moveNextBtn.click();
    }

    // Trigger onclick on the button with id="movesubmitbtn"
    // Ấn gửi nộp form
    let submitBtn = document.getElementById("movesubmitbtn");
    if (submitBtn) {
        submitBtn.click();
    }
})();
